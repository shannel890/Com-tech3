{% extends 'base.html' %}
{% block content %}
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css" rel="stylesheet" type="text/css" />
<script>
tailwind.config = {
  theme: {
    extend: {
      colors: {
        primary: {
          50: '#f9fafb',
          100: '#f3f4f6',
          500: '#6b7280',
          600: '#4b5563',
          700: '#374151',
        },
        secondary: {
          50: '#f9fafb',
          100: '#f3f4f6',
          400: '#9ca3af',
          500: '#6b7280',
          600: '#4b5563',
        },
      },
      animation: {
        'fade-in-down': 'fadeInDown 0.6s ease-out',
        'fade-in-up': 'fadeInUp 0.6s ease-out',
      },
      keyframes: {
        fadeInDown: {
          '0%': { opacity: '0', transform: 'translateY(-20px)' },
          '100%': { opacity: '1', transform: 'translateY(0)' },
        },
        fadeInUp: {
          '0%': { opacity: '0', transform: 'translateY(20px)' },
          '100%': { opacity: '1', transform: 'translateY(0)' },
        },
      },
      backdropBlur: {
        xs: '2px',
      },
    },
  },
  plugins: [require('daisyui')],
  daisyui: {
    themes: ['light'],
  },
}
</script>

<div data-theme="light" class="flex h-screen bg-gray-50 font-sans overflow-hidden">
    <!-- Sidebar -->
    <aside class="w-72 bg-base-100 shadow-lg flex flex-col transition-all duration-300 ease-out z-10 border-r border-base-200" id="sidebar">
        <div class="p-6 bg-base-100 text-base-content flex justify-between items-center border-b border-base-200">
            <div class="text-xl font-bold tracking-tight">Com-Tech</div>
            <div class="avatar">
                <div class="w-10 rounded-full ring ring-base-200 bg-base-200 flex items-center justify-center font-semibold text-sm">
                    {{ user.name[0] | upper }}
                </div>
            </div>
        </div>

        <nav class="flex-1 overflow-y-auto p-4">
            <div class="mb-6">
                <h3 class="px-2 mb-3 text-xs uppercase tracking-wide text-base-content/60 font-semibold">Main</h3>
                <ul class="menu space-y-1 rounded-box">
                    <li>
                        <a href="{{ url_for('dashboard.index') }}">
                            <i class="fas fa-comments mr-2 text-sm"></i>
                            Messages
                        </a>
                    </li>
                    <li>
                        <a class="active">
                            <i class="fas fa-users mr-2 text-sm"></i>
                            Contacts
                        </a>
                    </li>
                </ul>
            </div>

            <div class="mb-6">
                <h3 class="px-2 mb-3 text-xs uppercase tracking-wide text-base-content/60 font-semibold">Groups</h3>
                <ul class="menu space-y-1 rounded-box">
                    {% for group in groups %}
                    <li>
                        <a href="{{ url_for('dashboard.view_group', group_id=group.id) }}">
                            <i class="fas fa-users mr-2 text-sm"></i>
                            {{ group.name }}
                        </a>
                    </li>
                    {% else %}
                    <li class="text-base-content/60">No groups yet</li>
                    {% endfor %}
                </ul>
            </div>
        </nav>

        <div class="p-4 border-t border-base-200">
            <a href="{{ url_for('dashboard.create_group') }}" class="btn btn-outline btn-wide w-full flex items-center justify-center gap-2 text-sm font-semibold">
                <i class="fas fa-plus"></i>
                Create New Group
            </a>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 flex flex-col">
        <header class="navbar p-4 bg-base-100 shadow-sm border-b border-base-200">
            <label for="drawer" class="btn btn-ghost btn-circle swap swap-rotate" id="menuBtn">
                <input type="checkbox" />
                <i class="fas fa-bars text-xl"></i>
            </label>
            <div class="flex-1 relative max-w-md mx-4">
                <div class="form-control">
                    <input type="text" placeholder="Search contacts..." id="searchInput" class="input input-bordered w-full" />
                    <label class="label absolute left-3 top-1/2 -translate-y-1/2 text-base-content/40 pointer-events-none">
                        <i class="fas fa-search text-sm"></i>
                    </label>
                </div>
            </div>
            <div class="flex gap-2">
                <button class="btn btn-ghost btn-circle" title="Video Call">
                    <i class="fas fa-video text-xl"></i>
                </button>
                <button class="btn btn-ghost btn-circle" title="Audio Call">
                    <i class="fas fa-phone text-xl"></i>
                </button>
            </div>
        </header>

        <section class="flex-1 overflow-y-auto p-8 bg-base-100">
            <div class="text-center mb-8 animate-fade-in-down">
                <h2 class="text-3xl text-base-content font-bold mb-2">Contacts</h2>
                <p class="text-base-content/60 text-lg">Browse and manage your contacts.</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 animate-fade-in-up">
                {% for contact in users %}
                <div class="card bg-base-100 shadow-md hover:shadow-lg transition-shadow duration-300 border border-base-200">
                    <div class="card-body items-center text-center p-6">
                        <div class="avatar">
                            <div class="w-16 rounded-full bg-primary/10 flex items-center justify-center font-bold text-lg text-primary">
                                {{ contact.name[0] | upper }}
                            </div>
                        </div>
                        <h2 class="card-title text-base-content font-semibold mt-4 mb-2">{{ contact.name }}</h2>
                        <p class="text-base-content/60 text-sm mb-6 min-h-[2rem] leading-relaxed">{{ contact.email }}</p>
                        <div class="card-actions justify-center">
                            <a href="{{ url_for('dashboard.profile', user_id=contact.id) }}" class="btn btn-primary px-6 py-2 text-sm font-semibold">
                                View Profile
                            </a>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </section>
    </main>
</div>

<script>
const menuBtn = document.getElementById('menuBtn');
const sidebar = document.getElementById('sidebar');
menuBtn.addEventListener('click', () => sidebar.classList.toggle('open'));
</script>
{% endblock %}